I"<p>CustomView는 같은 UI를 가지는 View들을 하나의 공통된 View로 묶어 <strong>재사용</strong>하기 위해 만듭니다. <strong>불필요한 코드의 중복을 줄이고 유지보수를 쉽게</strong> 해주기 때문에 저는 되도록 만들어 쓰는 편입니다. CustomView를 만드는 건 이미 많은 블로그에 설명되어 있기 때문에 만드는 방법보다는, <code class="highlighter-rouge">CustomView를 만들면서 생긴 호기심</code>을 해결한 내용을 정리하고자 합니다.</p>

<p>내용이 많을 듯하여 나중에 글을 다시 정리할 때는 여러 개의 포스트로 쪼개야 할 것 같습니다ㅠ 시작해보겠습니다.</p>

<h1 id="interface-builder의-placeholders와-files-owner">Interface builder의 Placeholders와 File’s Owner</h1>
<p>CustomView를 만들 때 가장 많이 사용하는 방법이 Placeholders의 File’s Owner에 Custom Class Object를 연결해주는 것입니다. <strong>여기서 첫 번째 의문이 생깁니다.</strong></p>
<blockquote>
  <p>아니, UITableViewCell이나 UICollectionViewCell을 만들면 Interface Builder에 File’s Owner가 아니라 Cell Object에 연결되던데 <strong>왜 CustomView는 File’s Owner에 연결하지?</strong></p>
</blockquote>

<p>먼저 File’s Owner가 정확히 무엇인지 알아야 할 필요가 있어 보입니다.</p>

<p><br />
<!-- ![img1](../images/2020-04-22-iOS-custom-view/1.png)
<em style="text-align: center;">image_caption</em> --></p>

<figure class="image">
    <img src="../images/2020-04-22-iOS-custom-view/1.png" alt="UITableViewCell의 xib를 자동 생성했을 때" />
    <figcaption style="color: dimgray; font-size: 14px; text-align: center;">UITableViewCell의 xib를 자동 생성했을 때</figcaption>
</figure>
<p><br /></p>

<h1 id="files-owner란">File’s Owner란</h1>
<p>먼저 <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html">Nib Files</a> 공식 문서에 있는 File’s Owner의 내용 중 일부를 나름대로(?) 번역해보겠습니다.</p>

<p><img src="../images/2020-04-22-iOS-custom-view/2.png" alt="img2" /></p>

<blockquote>
  <p>nib 파일 안의 객체들 중 가장 중요한 것 중 하나가 File’s Owner 객체이다. Interface objects와 다르게, File’s Owner 객체는 <strong>placeholder 객체</strong>로서 nib 파일이 로드 될 때 생성되지 않는다. 대신, <strong>개발자가 코드 상에서 이 객체를 생성하고 nib-loading code에 전달해야 한다.</strong> 이 객체가 application 코드와 nib 파일의 컨텐츠 사이의 main link로서 너무나도 중요하기 때문이다. <strong>구체적으로 말하자면, File’s Owner는 nib 파일의 컨텐츠 들을 책임지는 Controller object다.</strong>
<br /><br />
Xcode에서 개발자는 nib 파일에서 File’s Owner와 다른 interface objects 사이의 connection들을 생성할 수 있다. <strong>nib 파일을 로드 할 때, nib-loading code는 개발자가 명시한 replacement object를 사용해서 이 connection들을 재생성한다.</strong> 이는 객체를 nib 파일 안의 reference objects가 되도록 허용하고, interface objects로 부터 발생한 메시지들을 자동으로 수신하게 해준다.</p>
</blockquote>

<p>여기서 유의깊게 봐야할 부분은 File’s Owner가 placeholder 객체라는 점 입니다. 저는 이 placeholder의 의미를 <strong>nib을 소유할 클래스의 타입(인스턴스가 아닌)을 설정하는 것</strong>이라고 이해했습니다. 즉, Interface Builder에서는 타입만을 지정해주고 실제 객체는 코드 상에서 만든 인스턴스를 전달하여 File’s Owner로 지정하는 것이죠.</p>
:ET