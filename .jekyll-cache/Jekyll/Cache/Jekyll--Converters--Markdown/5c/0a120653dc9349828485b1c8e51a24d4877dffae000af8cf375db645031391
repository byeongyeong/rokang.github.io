I"B…<p><strong>Codable í”„ë¡œí† ì½œë¡œ JSON ë°ì´í„° ì²˜ë¦¬í•˜ê¸°</strong></p>

<h2 id="why">Why?</h2>
<p>ìƒˆë¡œìš´ APIì™€ í•¨ê»˜ ë„ì°©í•œ JSON ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë ¤ë‹¤ ë³´ë‹ˆ ì ì‹œ ë‡Œê°€ ë©ˆì·„ìŠµë‹ˆë‹¤.</p>

<p>JSON êµ¬ì¡°ëŠ” ëŒ€ì¶© ì´ë¬ìŠµë‹ˆë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="o">...</span><span class="p">,</span>
  <span class="s">"data"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"room"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"room1"</span><span class="p">,</span>
        <span class="s">"order"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">"messages"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s">"content"</span><span class="p">:</span> <span class="s">"Mom"</span><span class="p">,</span>
            <span class="s">"person"</span><span class="p">:</span> <span class="s">"Tom"</span><span class="p">,</span>
            <span class="s">"order"</span><span class="p">:</span> <span class="mi">1</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="s">"content"</span><span class="p">:</span> <span class="s">"I'm sorry"</span><span class="p">,</span>
            <span class="s">"person"</span><span class="p">:</span> <span class="s">"Will"</span><span class="p">,</span>
            <span class="s">"order"</span><span class="p">:</span> <span class="mi">2</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="s">"content"</span><span class="p">:</span> <span class="s">"Thank you"</span><span class="p">,</span>
            <span class="s">"person"</span><span class="p">:</span> <span class="s">"Big brother Tom"</span><span class="p">,</span>
            <span class="s">"order"</span><span class="p">:</span> <span class="mi">3</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="o">...</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ì •ì‹  ì°¨ë¦¬ê³  ì›ë˜ í•´ì™”ë˜ ê²ƒì²˜ëŸ¼ ì—´ì‹¬íˆ ë””ì½”ë”©í•œ ê²°ê³¼ëŠ” ~</p>

<p>.</p>

<p>..</p>

<p>â€¦</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">jsonString</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">decoded</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONSerialization</span><span class="o">.</span><span class="nf">jsonObject</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[])</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">dataDic</span> <span class="o">=</span> <span class="p">(</span><span class="n">decoded</span> <span class="k">as?</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">Any</span><span class="p">])?[</span><span class="s">"data"</span><span class="p">]</span> <span class="k">as?</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="p">??</span> <span class="p">[:]</span>
        <span class="k">let</span> <span class="nv">roomArray</span> <span class="o">=</span> <span class="n">dataDic</span><span class="p">[</span><span class="s">"room"</span><span class="p">]</span> <span class="k">as?</span> <span class="p">[[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]]</span> <span class="p">??</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">room</span> <span class="k">in</span> <span class="n">roomArray</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">room</span><span class="p">[</span><span class="s">"name"</span><span class="p">])</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">room</span><span class="p">[</span><span class="s">"order"</span><span class="p">])</span>
            
            <span class="k">let</span> <span class="nv">messages</span> <span class="o">=</span> <span class="n">room</span><span class="p">[</span><span class="s">"messages"</span><span class="p">]</span> <span class="k">as?</span> <span class="p">[[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">Any</span><span class="p">]]</span> <span class="p">??</span> <span class="p">[]</span>
            
            <span class="k">for</span> <span class="n">msg</span> <span class="k">in</span> <span class="n">messages</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s">"content"</span><span class="p">])</span>
                <span class="nf">print</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s">"person"</span><span class="p">])</span>
                <span class="nf">print</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s">"order"</span><span class="p">])</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>â€¦â€¦ í•˜í•˜í•˜</p>

<p>ê°œë¹„ìŠ¤ì½˜ ì—†ì´ëŠ” ì†Œí™”í•˜ê¸° í˜ë“  ì½”ë“œë„¤ìš” ê»„ê»„. ì´ ì½”ë“œë¥¼ ê·¸ëƒ¥ ë‘˜ ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆ ê²€ìƒ‰ì„ í•´ë´ì•¼ê² ìŠµë‹ˆë‹¤. ìŠ¤ìœ„í”„íŠ¸ ê³ ìˆ˜ ë¶„ë“¤ì€ ì–´ë–»ê²Œ ì“°ëŠ”ì§€..</p>

<p>ì•„ Swift4ì— <code class="highlighter-rouge">Codable</code> ì´ë¼ëŠ” ê²Œ ìƒê²¼êµ°ìš”. ì¼ë‹¨ ì´ê²Œ ë­”ì§€ë¶€í„° ì¢€ ì•Œì•„ë´ì•¼ê² ìŠµë‹ˆë‹¤.</p>

<h2 id="codable">Codable?</h2>
<p><a href="https://developer.apple.com/documentation/swift/codable" target="blank">Codable</a>ì€ Decodable Encodableì„ í¬í•¨í•˜ëŠ” <code class="highlighter-rouge">protocol</code>ì´ë¼ê³  ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆë„¤ìš”. <a href="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types" target="blank">Encoding and Decoding Custom Types</a>ë¥¼ ë³´ê²Œ ë˜ë©´, SwiftëŠ” ë°ì´í„°ë¥¼ ì¸ì½”ë”©í•˜ê³  ë””ì½”ë”©í•˜ëŠ” í‘œì¤€í™”ëœ ì ‘ê·¼ë²•ì„ ì •ì˜í•˜ê³  ìˆë‹¤ëŠ” ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤. í‘œì¤€ì´ë¼ëŠ”ë° ë‹¹ì—°íˆ ì¨ì¤˜ì•¼ì£ .</p>

<p>ê·¸ëŸ¼ ì´ì œ Codableë¡œ ì € ê´´ë¬¼ê°™ì€ ë””ì½”ë”© ì½”ë“œë¥¼ ë‚˜ë¦„ëŒ€ë¡œ ì¢€ ì•„ë¦„ë‹µê²Œ ë°”ê¿”ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">Result</span><span class="p">:</span> <span class="kt">Decodable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">success</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">reason</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">rooms</span><span class="p">:</span> <span class="p">[</span><span class="kt">Room</span><span class="p">]?</span>
    
    <span class="kd">enum</span> <span class="kt">CodingKeys</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">success</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">rooms</span> <span class="o">=</span> <span class="s">"room"</span>
        <span class="k">case</span> <span class="n">data</span> <span class="o">=</span> <span class="s">"data"</span>
    <span class="p">}</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="n">from</span> <span class="nv">decoder</span><span class="p">:</span> <span class="kt">Decoder</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">container</span> <span class="o">=</span> <span class="k">try</span> <span class="n">decoder</span><span class="o">.</span><span class="nf">container</span><span class="p">(</span><span class="nv">keyedBy</span><span class="p">:</span> <span class="kt">CodingKeys</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">nestedContainer</span><span class="p">(</span><span class="nv">keyedBy</span><span class="p">:</span> <span class="kt">CodingKeys</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">data</span><span class="p">)</span>
        
        <span class="n">success</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Bool</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">success</span><span class="p">)</span>
        <span class="n">reason</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">reason</span><span class="p">)</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="k">try</span> <span class="n">data</span><span class="o">.</span><span class="nf">decode</span><span class="p">([</span><span class="kt">Room</span><span class="p">]</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">rooms</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">Room</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">order</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="kt">Message</span><span class="p">]?</span>
    
    <span class="kd">enum</span> <span class="kt">CodingKeys</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">name</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">messages</span>
    <span class="p">}</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="n">from</span> <span class="nv">decoder</span><span class="p">:</span> <span class="kt">Decoder</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">container</span> <span class="o">=</span> <span class="k">try</span> <span class="n">decoder</span><span class="o">.</span><span class="nf">container</span><span class="p">(</span><span class="nv">keyedBy</span><span class="p">:</span> <span class="kt">CodingKeys</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Int</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">order</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">([</span><span class="kt">Message</span><span class="p">]</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">messages</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">Message</span> <span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">content</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">person</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">order</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    
    <span class="kd">enum</span> <span class="kt">CodingKeys</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">content</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">order</span>
    <span class="p">}</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="n">from</span> <span class="nv">decoder</span><span class="p">:</span> <span class="kt">Decoder</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">container</span> <span class="o">=</span> <span class="k">try</span> <span class="n">decoder</span><span class="o">.</span><span class="nf">container</span><span class="p">(</span><span class="nv">keyedBy</span><span class="p">:</span> <span class="kt">CodingKeys</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="n">person</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">person</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Int</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">order</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">jsonString</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">using</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">??</span> <span class="kt">Data</span><span class="p">()</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Result</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"success : </span><span class="se">\(</span><span class="n">result</span><span class="o">.</span><span class="n">success</span><span class="o">!</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"reason : </span><span class="se">\(</span><span class="n">result</span><span class="o">.</span><span class="n">reason</span><span class="o">!</span><span class="se">)\n</span><span class="s">"</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">room</span> <span class="k">in</span> <span class="n">result</span><span class="o">.</span><span class="n">rooms</span><span class="o">!</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"  name : </span><span class="se">\(</span><span class="n">room</span><span class="o">.</span><span class="n">name</span><span class="o">!</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"  order : </span><span class="se">\(</span><span class="n">room</span><span class="o">.</span><span class="n">order</span><span class="o">!</span><span class="se">)\n</span><span class="s">"</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">msg</span> <span class="k">in</span> <span class="n">room</span><span class="o">.</span><span class="n">messages</span><span class="o">!</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"    content : </span><span class="se">\(</span><span class="n">msg</span><span class="o">.</span><span class="n">content</span><span class="o">!</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"    person : </span><span class="se">\(</span><span class="n">msg</span><span class="o">.</span><span class="n">person</span><span class="o">!</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"    order : </span><span class="se">\(</span><span class="n">msg</span><span class="o">.</span><span class="n">order</span><span class="o">!</span><span class="se">)\n</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ì½”ë“œëŠ” ë” ê¸¸ì–´ì¡Œì§€ë§Œ json ë°ì´í„°ë¡œë¶€í„° Result, Room, Message êµ¬ì¡°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¶”ì¶œí•´ì„œ ë°ì´í„°ë¥¼ ë” ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤! ì§ì§ì§</p>

<p>ì•„ ì°¸ê³ ë¡œ, ì˜ˆì‹œì´ë‹¤ë³´ë‹ˆ printì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ê°•ì œ ì–¸ë˜í•‘í–ˆì§€ë§Œ, ì‹¤ì œ json ë°ì´í„°ëŠ” nilì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— if êµ¬ë¬¸ì´ë‚˜ guardë¥¼ ì‚¬ìš©í•˜ì‹œëŠ”ê²Œ ë” ì•ˆì „í•©ë‹ˆë‹¤.</p>

<p>ì½”ë“œë¥¼ ë‹¤ì‹œ ì‚´í´ë³´ë©´ CodingKeyë¼ëŠ” ë‚¯ì„  ì¹œêµ¬ê°€ ë³´ì…ë‹ˆë‹¤. ì´ ì¹œêµ¬ì™€ í•¨ê»˜ <code class="highlighter-rouge">init(from decoder: Decoder)</code>ê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ê°„ë‹¨íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<h2 id="codingkey">CodingKey?</h2>
<p><a href="https://developer.apple.com/documentation/swift/codingkey" target="blank">CodingKey</a>ëŠ” ì¸ì½”ë”©ê³¼ ë””ì½”ë”©ì„ ìœ„í•œ í‚¤ë¡œ ì“°ì´ëŠ” íƒ€ì…ì´ë¼ê³  í•˜ë„¤ìš”. ì½”ë“œë¥¼ ë‹¤ì‹œ ë³´ì‹œë©´ CodingKey í”„ë¡œí† ì½œì„ ì±„íƒí•œ CodingKeys enumì˜ ê°’ë“¤ì´ json ë°ì´í„°ì˜ keyì™€ ë§¤í•‘ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Resultì˜ rooms ë°ì´í„°ëŠ” ë””ì½”ë”©ì„ ìœ„í•´ â€œroomâ€ í‚¤ë¡œ ë§¤í•‘ë˜ì–´ìˆë„¤ìš”.</p>

<p>ê·¸ëŸ¼ ì´ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í•œë²ˆ ì‚´í´ë³´ë„ë¡ í•´ìš”.</p>

<ol>
  <li>decode ë©”ì„œë“œëŠ” ë””ì½”ë”© ë  dataë¡œë¶€í„° Result íƒ€ì…ì˜ valueë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">Result</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
<span class="c1">/// Decodes a top-level value of the given type from the given JSON representation.</span>
<span class="c1">///</span>
<span class="c1">/// - parameter type: The type of the value to decode.</span>
<span class="c1">/// - parameter data: The data to decode from.</span>
<span class="c1">/// - returns: A value of the requested type.</span>
<span class="c1">/// - throws: `DecodingError.dataCorrupted` if values requested from the payload are corrupted, or if the given data is not valid JSON.</span>
<span class="c1">/// - throws: An error if any value throws an error during decoding.</span>
<span class="kd">open</span> <span class="kd">func</span> <span class="n">decode</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">T</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span> <span class="n">from</span> <span class="nv">data</span><span class="p">:</span> <span class="kt">Data</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">T</span> <span class="k">where</span> <span class="kt">T</span> <span class="p">:</span> <span class="kt">Decodable</span>
</code></pre></div>    </div>
  </li>
  <li>1ë²ˆ ì½”ë“œê°€ Resultë¥¼ ì´ˆê¸°í™”í•˜ëŠ” init ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê² ë„¤ìš”. decoderì— ë‹´ê²¨ìˆë˜ dataë¡œë¶€í„° containerë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. <code class="highlighter-rouge">CodingKeys.self</code> íƒ€ì…ì´ dataì˜ keyì™€ ë§¤í•‘ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ <code class="highlighter-rouge">DecodingError.typeMismatch</code> ì—ëŸ¬ë¥¼ ë˜ì§€ê² ë„¤ìš”.
    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">container</span> <span class="o">=</span> <span class="k">try</span> <span class="n">decoder</span><span class="o">.</span><span class="nf">container</span><span class="p">(</span><span class="nv">keyedBy</span><span class="p">:</span> <span class="kt">CodingKeys</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
<span class="c1">/// Returns the data stored in this decoder as represented in a container</span>
<span class="c1">/// keyed by the given key type.</span>
<span class="c1">///</span>
<span class="c1">/// - parameter type: The key type to use for the container.</span>
<span class="c1">/// - returns: A keyed decoding container view into this decoder.</span>
<span class="c1">/// - throws: `DecodingError.typeMismatch` if the encountered stored value is</span>
<span class="c1">///   not a keyed container.</span>
<span class="kd">func</span> <span class="n">container</span><span class="o">&lt;</span><span class="kt">Key</span><span class="o">&gt;</span><span class="p">(</span><span class="n">keyedBy</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">Key</span><span class="o">.</span><span class="k">Type</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">KeyedDecodingContainer</span><span class="o">&lt;</span><span class="kt">Key</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">Key</span> <span class="p">:</span> <span class="kt">CodingKey</span>
</code></pre></div>    </div>
  </li>
  <li>nestedì´ê¸° ë•Œë¬¸ì— forKey íŒŒë¼ë¯¸í„°ê°€ ì¶”ê°€ë˜ì„œ í•´ë‹¹ í‚¤ì— ëŒ€í•œ sub containerë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.
    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="k">try</span> <span class="n">container</span><span class="o">.</span><span class="nf">nestedContainer</span><span class="p">(</span><span class="nv">keyedBy</span><span class="p">:</span> <span class="kt">CodingKeys</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">data</span><span class="p">)</span>
<span class="c1">/// Returns the data stored for the given key as represented in a container</span>
<span class="c1">/// keyed by the given key type.</span>
<span class="c1">///</span>
<span class="c1">/// - parameter type: The key type to use for the container.</span>
<span class="c1">/// - parameter key: The key that the nested container is associated with.</span>
<span class="c1">/// - returns: A keyed decoding container view into `self`.</span>
<span class="c1">/// - throws: `DecodingError.typeMismatch` if the encountered stored value is</span>
<span class="c1">///   not a keyed container.</span>
<span class="kd">public</span> <span class="kd">func</span> <span class="n">nestedContainer</span><span class="o">&lt;</span><span class="kt">NestedKey</span><span class="o">&gt;</span><span class="p">(</span><span class="n">keyedBy</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">NestedKey</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span> <span class="n">forKey</span> <span class="nv">key</span><span class="p">:</span> <span class="kt">KeyedDecodingContainer</span><span class="o">&lt;</span><span class="kt">K</span><span class="o">&gt;.</span><span class="kt">Key</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">KeyedDecodingContainer</span><span class="o">&lt;</span><span class="kt">NestedKey</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">NestedKey</span> <span class="p">:</span> <span class="kt">CodingKey</span>
</code></pre></div>    </div>
  </li>
  <li>sub containerì¸ data ì¸ìŠ¤í„´ìŠ¤ì—ì„œ â€œroomâ€ keyì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ [Room] íƒ€ì…ì˜ valueë¡œ ë””ì½”ë”© í•´ì¤ë‹ˆë‹¤.
Room íƒ€ì…ë„ êµ¬ì¡°ì²´ì´ê¸° ë•Œë¬¸ì— ì´ ê³¼ì •ì—ì„œ Roomì˜ initë„ ì‹¤í–‰ì´ ë˜ê² ë„¤ìš”.
    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rooms</span> <span class="o">=</span> <span class="k">try</span> <span class="n">data</span><span class="o">.</span><span class="nf">decode</span><span class="p">([</span><span class="kt">Room</span><span class="p">]</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="o">.</span><span class="n">rooms</span><span class="p">)</span>
<span class="c1">/// Decodes a value of the given type for the given key.</span>
<span class="c1">///</span>
<span class="c1">/// - parameter type: The type of value to decode.</span>
<span class="c1">/// - parameter key: The key that the decoded value is associated with.</span>
<span class="c1">/// - returns: A value of the requested type, if present for the given key</span>
<span class="c1">///   and convertible to the requested type.</span>
<span class="c1">/// - throws: `DecodingError.typeMismatch` if the encountered encoded value</span>
<span class="c1">///   is not convertible to the requested type.</span>
<span class="c1">/// - throws: `DecodingError.keyNotFound` if `self` does not have an entry</span>
<span class="c1">///   for the given key.</span>
<span class="c1">/// - throws: `DecodingError.valueNotFound` if `self` has a null entry for</span>
<span class="c1">///   the given key.</span>
<span class="kd">public</span> <span class="kd">func</span> <span class="n">decode</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">T</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span> <span class="n">forKey</span> <span class="nv">key</span><span class="p">:</span> <span class="kt">KeyedDecodingContainer</span><span class="o">&lt;</span><span class="kt">K</span><span class="o">&gt;.</span><span class="kt">Key</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">T</span> <span class="k">where</span> <span class="kt">T</span> <span class="p">:</span> <span class="kt">Decodable</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>ì§€ê¸ˆê¹Œì§€ì˜ ë‚´ìš©ì´ ë””ì½”ë”©ë§Œ ë‹¤ë£¨ê³  ìˆì§€ë§Œ, ì¸ì½”ë”©ì€ JSONEncoder í´ë˜ìŠ¤ë¥¼ í™œìš©í•œ ë°˜ëŒ€ì˜ ê³¼ì •ì´ë‹ˆê¹Œ ì‹ì€ ì£½ ë¨¹ê¸° ì•„ë‹ê¹Œ ì‹¶ë„¤ìš” í¬í¬</p>

<h2 id="íŒ">íŒ</h2>
<ol>
  <li>
    <p>ğŸ”¥ ë°”ë‹ë¼ Codableë„ JSONSerializationì— ë¹„í•´ì„œ ìƒë‹¹íˆ í¸í•´ì¡Œì§€ë§Œ, <a href="https://github.com/JohnSundell/Codextended" target="blank">Codextended</a> ë¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ëŠ” ë” ì‰½ê²Œ ì¸ì½”ë”©ê³¼ ë””ì½”ë”©ì„ í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ê¹ƒí—™ì˜ Star ìˆ˜ë„ 1,100ì´ê³  ì»¤ë°‹ë„ ë¹„êµì (?) ìµœê·¼ì´ì–´ì„œ Codableë„ ê·€ì°®ë‹¤! ë” ì‰½ê²Œ jsonì„ ë‹¤ë£¨ê³  ì‹¶ë‹¤! í•˜ì‹ ë‹¤ë©´ ìœ ìš©í•˜ì§€ ì•Šì„ê¹Œ ì‹¶ìŠµë‹ˆë‹¤. ì €ëŠ” ì•„ì§ ì• ì†¡ì´ë¼ ë‚˜ì¤‘ì— ê³ ë ¤í•´ë´ì•¼ê² ë„¤ìš”ã…‹ã…‹</p>
  </li>
  <li>
    <p>ğŸ“† ë‚ ì§œ json dataë¥¼ Date íƒ€ì…ìœ¼ë¡œ í¬ë§·íŒ…í•˜ëŠ”ê±´ ê·€ì°®ì§€ë§Œ ì¤‘ìš”í•œ ì¼ì´ì£ . ê·¸ë˜ì„œ Codableì—ëŠ” ì–´ë–¤ ë‚ ì§œ ë°ì´í„°ê°€ íŠ¹ì • í¬ë§·ì— ë§ë‹¤ë©´ <code class="highlighter-rouge">ìë™ìœ¼ë¡œ Date ì¸ìŠ¤í„´ìŠ¤ë¡œ ë””ì½”ë”©</code> í•´ì£¼ëŠ” strategy(ì „ëµ)ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">formatter</span> <span class="o">=</span> <span class="kt">DateFormatter</span><span class="p">()</span>
<span class="n">formatter</span><span class="o">.</span><span class="n">dateFormat</span> <span class="o">=</span> <span class="s">"yyyy.MM.dd"</span>
<span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">dateDecodingStrategy</span> <span class="o">=</span> <span class="o">.</span><span class="nf">formatted</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
</code></pre></div>    </div>
    <p>ì´ë ‡ê²Œ ì§ì ‘ ì‘ì„±í•œ DateFormatterë¥¼ ì§€ì •í•´ì„œ yyyy.MM.dd í¬ë§·ì˜ ë°ì´í„°ë¥¼ Dateë¡œ ë³€í™˜í•  ìˆ˜ë„ ìˆêµ¬ìš”</p>
    <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">dateDecodingStrategy</span> <span class="o">=</span> <span class="o">.</span><span class="n">iso8601</span>
<span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">dateDecodingStrategy</span> <span class="o">=</span> <span class="o">.</span><span class="n">millisecondsSince1970</span>
<span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">dateDecodingStrategy</span> <span class="o">=</span> <span class="o">.</span><span class="n">secondsSince1970</span>
</code></pre></div>    </div>
    <p>ì´ë ‡ê²Œ í‘œì¤€í™” ëœ í¬ë§·ì„ ì ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤!
ì €ëŠ” ì•„ë¬´ë˜ë„ formattedë‚˜ iso8601ì„ ë§ì´ ì‚¬ìš©í•˜ì§€ ì•Šì„ê¹Œ ì‹¶ë„¤ìš”.</p>
  </li>
</ol>

<h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h2>
:ET